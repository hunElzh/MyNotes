### 啥是动态代理？

> 在 Java 语言中，非抽象类是可以直接通过 new 进行实例化；而接口并不能实例化，他只能被一个类所实现，再通过向上转型的防止而实例化。



### 一个静态代理的简单例子

~~~ java
public interface StaticProxy {
    public void helloWorld(String name);
}

//通过静态代理创建一个类去实现StaticProxy接口，并重写其中的方法
class Test implements StaticProxy{

    @Override
    public void helloWorld(String name) {
        System.out.println(name + "says hello world");
    }
    
    public static void main(String[] args) {
        StaticProxy staticProxy = new Test();
        staticProxy.helloWorld("lzh");
    }
}
~~~



### 一个动态代理的简单例子

~~~ java
public interface DynamicProxy {
    public void helloWorld(String name);
}

class Test2 {
    public static void main(String[] args) {

        //InvocationHandler是一个函数式接口，
        InvocationHandler handler = new InvocationHandler() {
            @Override
            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
                System.out.println(method);
                System.out.println(Arrays.toString(args));
                if (method.getName().equals("helloWorld")) {
                    System.out.println(args[0] + " says hello world");
                }
                return null;
            }
        };


        DynamicProxy proxy = (DynamicProxy) Proxy.newProxyInstance(
                DynamicProxy.class.getClassLoader(),
                new Class[] {DynamicProxy.class},
                handler
        );
        proxy.helloWorld("lzh");
    }
}
~~~

